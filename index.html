<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Meute - a foundation for unhosted social web apps</title>
  </head>
  <body>
    <h1>v0.5.4</h1>
    <p style="width:30em" >Meute is still very basic, but it can already help you build an app that combines
      <a href="http://remotestorage.io/">remotestorage</a> for per-user data storage and
      <a href="http://sockethub.org/">sockethub</a> for relaying messages from the browser to the outside world.
      The code is <a href="http://github.com/michielbdejong/meute">on github</a>.</p>
    <p style="width:30em" ><strong>NOTE:</strong> You currently need to use the
    <a href="https://github.com/sockethub/sockethub/commit/06ab6b412eb79c92ec815b5304c8fa3229f60c46">current master</a> of sockethub for
    functions like `meute.email.fetch` to work correctly. Other functionality also requires at least the current master,
    because the config syntax changed, and some irc functionality was added since the v0.1.5 release of sockethub.</p>
    <p style="width:30em" >This page includes a build from source; view the page source to see which JavaScript files it includes.
      You can try out meute by opening your web console now, and typing 'meute.' to see which commands are available.
      The full 0.5 API is described in the <a href="https://github.com/michielbdejong/meute">readme</a>, but here is an example:</p>
    <pre id="pre1">(loading...)</pre>
    <p style="width:30em" >You can also do IndieWeb things with meute (provided you run a webserver with remoteStorage access to the public
    html folder, like <a href="https://github.com/michielbdejong/resite">reSite</a>):</p>
    <pre id="pre2">(loading...)</pre>
    <p style="width:30em" >The credentials you give in the addAccount calls will be encrypted with the master password using sjcl and stored
      in the respective remotestorage modules.</p>
  </body>
  <script src="upstream/sjcl.js"> </script>
  <script src="upstream/sockethub-client.js"></script>
  <script src="upstream/asrender.js"> </script>

  <!-- seems that hoodie has an undocumented dependency on jquery -->
  <script src="upstream/jquery.js"> </script>
  <script src="upstream/hoodie.js"> </script>

  <!-- rs.js -->
  <script src="upstream/remotestorage.js"></script>

  <script src="upstream/remotestorage-modules/utils/credentialsstore.js"> </script>
  <script src="upstream/remotestorage-modules/utils/prefixtree.js"> </script>
  <script src="upstream/remotestorage-modules/utils/syncedmap.js"> </script>
  <script src="upstream/remotestorage-modules/utils/syncedvar.js"> </script>

  <script src="upstream/remotestorage-modules/sockethub-credentials.js"> </script>
  <script src="upstream/remotestorage-modules/messages.js"> </script>
  <script src="upstream/remotestorage-modules/email-credentials.js"> </script>
  <script src="upstream/remotestorage-modules/irc-credentials.js"> </script>
  <script src="upstream/remotestorage-modules/twitter-credentials.js"> </script>
  <script src="upstream/remotestorage-modules/facebook-credentials.js"> </script>
  <script src="upstream/remotestorage-modules/contacts.js"> </script>
  <script src="upstream/remotestorage-modules/documents.js"> </script>
  <script src="upstream/remotestorage-modules/pgp.js"> </script>
  <script src="upstream/remotestorage-modules/pictures.js"> </script>

  <script src="meute.js"> </script>
  <script src="meute-email.js"> </script>
  <script src="meute-www.js"> </script>
  <script src= "meute-instantiate.js"></script>

  <script id="exampleCode1">
    function step1() {
      meute.addAccount('sockethub', 'wss://michielbdejong.com:10550/', '1234567890');
    }
    function step2() {
      meute.addAccount('irc', 'irc.freenode.net', 'nick12345');
    }
    function step3() {
      meute.join('irc', ['#meute']); //meute.join('irc', '#meute'); is also allowed when joining only one channel
    }
    function step4() {
      meute.send('irc', '#meute', 'hi');
    }
    function step5() {
      meute.leave('irc', ['#meute']); //meute.leave('irc', '#meute'); is also allowed when leaving only one channel
    }
    function step6() {
      meute.email.fetch(0, 50);
    }
    function step7() {
      var str = '';
      for (i=0; i<messageLogs.length; i++) {
        str += '' + i + ': ' + msgs[i].actor[0].address + '-' + msgs[i].object.subject + '\n';
      }
      return str;
    }

    document.getElementById('pre1').innerHTML = document.getElementById('exampleCode1').innerHTML.replace('<', '&gt;');
  </script>
  <script id="exampleCode2">
    function indieWebExampleStep1(fbToken) {
      meute.addAccount('facebook', fbToken);
    }
    function indieWebExampleStep2(twitterAccessToken, twitterAccessTokenKey, twitterConsumerSecret, twitterConsumerKey) {
      meute.addAccount('twitter', twitterAccessToken, twitterAccessTokenKey, twitterConsumerSecret, twitterConsumerKey);
    }
    //...wait for the requests to complete...
    function indieWebExampleStep3() {
      meute.www.publish('Posting from an unhosted meute instance');
    }
    
    function indieWebExampleStep4() {
      meute.email.fetchEmailsFromTo(19000, 19000);
    }
    
    document.getElementById('pre2').innerHTML = document.getElementById('exampleCode2').innerHTML.replace('<', '&gt;');
  </script>
</html>
