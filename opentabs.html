<!DOCTYPE html>
<html>
  <head><meta charset="utf-8" /></head>
  <body>see console
  </body>
  <script src="remotestorage.js"></script>
  <script src="remotestorage-modules/module-utils.js"></script>
  <script src="remotestorage-modules/contacts.js"></script>
  <script src="remotestorage-modules/money.js"></script>
  <script src="opentabs-data.js"></script>
  <script>
    remoteStorage.displayWidget();
    remoteStorage.claimAccess('contacts', 'rw');
    remoteStorage.claimAccess('money', 'rw');

    var formHtml = 'Enter Opentabs command:<input id="ot-cmd" /><br>Examples: <ul> <li>2000 INR by me for both #peter paid lunch</li> <li>82.91 USD by peter for michael,john #goa2014 gas</li> <li>0.06 BIT by michael for peter #goa2014 settlement to your bitcoin wallet 2014-01-31 11:14:03</li> </ul>';

    var tabNames = remoteStorage.money.getTabNames(), peers = {};

    function markCell(i, j) {
      return;
      if(!nodeNames[i]) {
        console.log('unknown row', i);
      } else if(!nodeNames[j]) {
        console.log('unknown column', j);
      } else {
        document.getElementById(nodeNames[i]+':'+nodeNames[j]).innerHTML='*';
      }
    }
    function showTab(i) {
      showTabList();
      document.body.innerHTML += formHtml + remoteStorage.money.getTabTable(i);
    }
    function showTabList() {
      document.body.innerHTML = formHtml;
      document.body.innerHTML += remoteStorage.money.getCyclesGraph();
      document.body.innerHTML+= remoteStorage.money.findCycles(markCell);
      document.body.innerHTML += remoteStorage.money.getTabList();
    }
    showTabList();
  </script>
</html>