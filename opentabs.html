<!DOCTYPE html>
<html>
  <head><meta charset="utf-8" /></head>
  <body>see console</body>
  <script src="remotestorage.js"></script>
  <script src="remotestorage-modules/module-utils.js"></script>
  <script src="remotestorage-modules/contacts.js"></script>
  <script src="remotestorage-modules/money.js"></script>
  <script src="opentabs-data.js"></script>
  <script>
    remoteStorage.displayWidget();
    remoteStorage.claimAccess('contacts', 'rw');
    remoteStorage.claimAccess('money', 'rw');
    
    var tabNames = remoteStorage.money.getTabNames(), peers = {};

    function markCell(i, j) {
      return;
      if(!nodeNames[i]) {
        console.log('unknown row', i);
      } else if(!nodeNames[j]) {
        console.log('unknown column', j);
      } else {
        document.getElementById(nodeNames[i]+':'+nodeNames[j]).innerHTML='*';
      }
    }
    function showTab(i) {
      showTabList();
      document.body.innerHTML += remoteStorage.money.getTabTable(i);
    }
    function showTabList() {
      document.body.innerHTML = ''; 
      document.body.innerHTML += remoteStorage.money.getCyclesGraph();
      document.body.innerHTML+= remoteStorage.money.findCycles(markCell);
      document.body.innerHTML += remoteStorage.money.getTabList();
    }
    showTabList();
  </script>
</html>